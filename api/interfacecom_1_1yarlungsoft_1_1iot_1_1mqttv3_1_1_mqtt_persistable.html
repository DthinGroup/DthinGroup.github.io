<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>DthingApi: com.yarlungsoft.iot.mqttv3.MqttPersistable Interface Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">DthingApi
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><b>com</b></li><li class="navelem"><b>yarlungsoft</b></li><li class="navelem"><b>iot</b></li><li class="navelem"><b>mqttv3</b></li><li class="navelem"><a class="el" href="interfacecom_1_1yarlungsoft_1_1iot_1_1mqttv3_1_1_mqtt_persistable.html">MqttPersistable</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="interfacecom_1_1yarlungsoft_1_1iot_1_1mqttv3_1_1_mqtt_persistable-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">com.yarlungsoft.iot.mqttv3.MqttPersistable Interface Reference</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:acd38e4074663d76cf81aeb8cac0c7bff"><td class="memItemLeft" align="right" valign="top">byte []&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interfacecom_1_1yarlungsoft_1_1iot_1_1mqttv3_1_1_mqtt_persistable.html#acd38e4074663d76cf81aeb8cac0c7bff">getHeaderBytes</a> ()  throws MqttPersistenceException</td></tr>
<tr class="separator:acd38e4074663d76cf81aeb8cac0c7bff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2bea72a04a72cad3eb9ed544f3f8f823"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interfacecom_1_1yarlungsoft_1_1iot_1_1mqttv3_1_1_mqtt_persistable.html#a2bea72a04a72cad3eb9ed544f3f8f823">getHeaderLength</a> ()  throws MqttPersistenceException</td></tr>
<tr class="separator:a2bea72a04a72cad3eb9ed544f3f8f823"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6d99982dfc4d13be60e8cd6e1ce66924"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interfacecom_1_1yarlungsoft_1_1iot_1_1mqttv3_1_1_mqtt_persistable.html#a6d99982dfc4d13be60e8cd6e1ce66924">getHeaderOffset</a> ()  throws MqttPersistenceException</td></tr>
<tr class="separator:a6d99982dfc4d13be60e8cd6e1ce66924"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af4c49b8a8405f2aad3e4a5ac49dfad9d"><td class="memItemLeft" align="right" valign="top">byte []&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interfacecom_1_1yarlungsoft_1_1iot_1_1mqttv3_1_1_mqtt_persistable.html#af4c49b8a8405f2aad3e4a5ac49dfad9d">getPayloadBytes</a> ()  throws MqttPersistenceException</td></tr>
<tr class="separator:af4c49b8a8405f2aad3e4a5ac49dfad9d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7bd6bd0cce98b30f8e607eafc2893b59"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interfacecom_1_1yarlungsoft_1_1iot_1_1mqttv3_1_1_mqtt_persistable.html#a7bd6bd0cce98b30f8e607eafc2893b59">getPayloadLength</a> ()  throws MqttPersistenceException</td></tr>
<tr class="separator:a7bd6bd0cce98b30f8e607eafc2893b59"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa201cbe68f034bcf66a014a5eee55e03"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interfacecom_1_1yarlungsoft_1_1iot_1_1mqttv3_1_1_mqtt_persistable.html#aa201cbe68f034bcf66a014a5eee55e03">getPayloadOffset</a> ()  throws MqttPersistenceException</td></tr>
<tr class="separator:aa201cbe68f034bcf66a014a5eee55e03"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Represents an object used to pass data to be persisted across the <a class="el" href="">MqttClientPersistence</a> interface. </p>
<p>When data is passed across the interface the header and payload are separated, so that unnecessary message copies may be avoided. For example, if a 10 MB payload was published it would be inefficient to create a byte array a few bytes larger than 10 MB and copy the MQTT message header and payload into a contiguous byte array.</p>
<p>When the request to persist data is made a separate byte array and offset is passed for the header and payload. Only the data between offset and length need be persisted. So for example, a message to be persisted consists of a header byte array starting at offset 1 and length 4, plus a payload byte array starting at offset 30 and length 40000. There are three ways in which the persistence implementation may return data to the client on recovery: </p><ul>
<li>
It could return the data as it was passed in originally, with the same byte arrays and offsets. </li>
<li>
It could safely just persist and return the bytes from the offset for the specified length. For example, return a header byte array with offset 0 and length 4, plus a payload byte array with offset 0 and length 40000 </li>
<li>
It could return the header and payload as a contiguous byte array with the header bytes preceeding the payload. The contiguous byte array should be set as the header byte array, with the payload byte array being null. For example, return a single byte array with offset 0 and length 40004. This is useful when recovering from a file where the header and payload could be written as a contiguous stream of bytes. </li>
</ul>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="acd38e4074663d76cf81aeb8cac0c7bff"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acd38e4074663d76cf81aeb8cac0c7bff">&#9670;&nbsp;</a></span>getHeaderBytes()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">byte [] com.yarlungsoft.iot.mqttv3.MqttPersistable.getHeaderBytes </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> throws <a class="el" href="classcom_1_1yarlungsoft_1_1iot_1_1mqttv3_1_1_mqtt_persistence_exception.html">MqttPersistenceException</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns the header bytes in an array. The bytes start at <a class="el" href="interfacecom_1_1yarlungsoft_1_1iot_1_1mqttv3_1_1_mqtt_persistable.html#a6d99982dfc4d13be60e8cd6e1ce66924">getHeaderOffset()</a> and continue for <a class="el" href="interfacecom_1_1yarlungsoft_1_1iot_1_1mqttv3_1_1_mqtt_persistable.html#a2bea72a04a72cad3eb9ed544f3f8f823">getHeaderLength()</a>. </p><dl class="section return"><dt>Returns</dt><dd>the header bytes. </dd></dl>

</div>
</div>
<a id="a2bea72a04a72cad3eb9ed544f3f8f823"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2bea72a04a72cad3eb9ed544f3f8f823">&#9670;&nbsp;</a></span>getHeaderLength()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int com.yarlungsoft.iot.mqttv3.MqttPersistable.getHeaderLength </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> throws <a class="el" href="classcom_1_1yarlungsoft_1_1iot_1_1mqttv3_1_1_mqtt_persistence_exception.html">MqttPersistenceException</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns the length of the header. </p><dl class="section return"><dt>Returns</dt><dd>the header length </dd></dl>

</div>
</div>
<a id="a6d99982dfc4d13be60e8cd6e1ce66924"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6d99982dfc4d13be60e8cd6e1ce66924">&#9670;&nbsp;</a></span>getHeaderOffset()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int com.yarlungsoft.iot.mqttv3.MqttPersistable.getHeaderOffset </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> throws <a class="el" href="classcom_1_1yarlungsoft_1_1iot_1_1mqttv3_1_1_mqtt_persistence_exception.html">MqttPersistenceException</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns the offset of the header within the byte array returned by <a class="el" href="interfacecom_1_1yarlungsoft_1_1iot_1_1mqttv3_1_1_mqtt_persistable.html#acd38e4074663d76cf81aeb8cac0c7bff">getHeaderBytes()</a>. </p><dl class="section return"><dt>Returns</dt><dd>the header offset. </dd></dl>

</div>
</div>
<a id="af4c49b8a8405f2aad3e4a5ac49dfad9d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af4c49b8a8405f2aad3e4a5ac49dfad9d">&#9670;&nbsp;</a></span>getPayloadBytes()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">byte [] com.yarlungsoft.iot.mqttv3.MqttPersistable.getPayloadBytes </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> throws <a class="el" href="classcom_1_1yarlungsoft_1_1iot_1_1mqttv3_1_1_mqtt_persistence_exception.html">MqttPersistenceException</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns the payload bytes in an array. The bytes start at <a class="el" href="interfacecom_1_1yarlungsoft_1_1iot_1_1mqttv3_1_1_mqtt_persistable.html#aa201cbe68f034bcf66a014a5eee55e03">getPayloadOffset()</a> and continue for <a class="el" href="interfacecom_1_1yarlungsoft_1_1iot_1_1mqttv3_1_1_mqtt_persistable.html#a7bd6bd0cce98b30f8e607eafc2893b59">getPayloadLength()</a>. </p><dl class="section return"><dt>Returns</dt><dd>the payload bytes. </dd></dl>

</div>
</div>
<a id="a7bd6bd0cce98b30f8e607eafc2893b59"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7bd6bd0cce98b30f8e607eafc2893b59">&#9670;&nbsp;</a></span>getPayloadLength()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int com.yarlungsoft.iot.mqttv3.MqttPersistable.getPayloadLength </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> throws <a class="el" href="classcom_1_1yarlungsoft_1_1iot_1_1mqttv3_1_1_mqtt_persistence_exception.html">MqttPersistenceException</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns the length of the payload. </p><dl class="section return"><dt>Returns</dt><dd>the payload length. </dd></dl>

</div>
</div>
<a id="aa201cbe68f034bcf66a014a5eee55e03"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa201cbe68f034bcf66a014a5eee55e03">&#9670;&nbsp;</a></span>getPayloadOffset()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int com.yarlungsoft.iot.mqttv3.MqttPersistable.getPayloadOffset </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> throws <a class="el" href="classcom_1_1yarlungsoft_1_1iot_1_1mqttv3_1_1_mqtt_persistence_exception.html">MqttPersistenceException</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns the offset of the payload within the byte array returned by <a class="el" href="interfacecom_1_1yarlungsoft_1_1iot_1_1mqttv3_1_1_mqtt_persistable.html#af4c49b8a8405f2aad3e4a5ac49dfad9d">getPayloadBytes()</a>. </p><dl class="section return"><dt>Returns</dt><dd>the payload offset. </dd></dl>

</div>
</div>
<hr/>The documentation for this interface was generated from the following file:<ul>
<li>src/com/yarlungsoft/iot/mqttv3/MqttPersistable.java</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
